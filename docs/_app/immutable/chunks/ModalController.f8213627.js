import{S as H,i as J,s as K,k as $,q as w,a as B,l as k,m as T,r as D,h as p,c as A,n as v,b as y,C as d,D as P,E as I,Q as se,F as le,P as Oe,e as j,u as re,N as Be,O as me,R as Ie,g as U,v as ue,d as L,f as fe,X as he,w as be,V as ve,y as z,z as Q,Y as Z,A as W,a1 as Ae,a2 as Ce,W as ge,a3 as Me,B as X}from"./index.737bebd0.js";import{m as R,M as V}from"./stores.a5f0f004.js";import{s as Ee,M as Le}from"./Modal.5afdcc6d.js";function Re(r){let e,s=r[0]()+"",t,l,n,o,a,_,c,u,f,m;return{c(){e=$("span"),t=w(s),l=B(),n=$("div"),o=$("button"),a=w("No"),_=B(),c=$("button"),u=w("Yes"),this.h()},l(i){e=k(i,"SPAN",{class:!0});var b=T(e);t=D(b,s),b.forEach(p),l=A(i),n=k(i,"DIV",{class:!0});var h=T(n);o=k(h,"BUTTON",{class:!0});var g=T(o);a=D(g,"No"),g.forEach(p),_=A(h),c=k(h,"BUTTON",{id:!0,class:!0});var C=T(c);u=D(C,"Yes"),C.forEach(p),h.forEach(p),this.h()},h(){v(e,"class","svelte-144lea8"),v(o,"class","svelte-144lea8"),v(c,"id","confirm-btn"),v(c,"class","svelte-144lea8"),v(n,"class","svelte-144lea8")},m(i,b){y(i,e,b),d(e,t),y(i,l,b),y(i,n,b),d(n,o),d(o,a),d(n,_),d(n,c),d(c,u),f||(m=[P(o,"click",R.dismissModal),P(c,"click",r[1])],f=!0)},p:I,i:I,o:I,d(i){i&&p(e),i&&p(l),i&&p(n),f=!1,se(m)}}}function Ve(r,e,s){let t;le(r,R,o=>s(2,t=o));function l(){if(!t.data)return"";let o="Are you sure you want to";if(t.mode==V.RemovePerson)o+=` remove "${t.data}"?`;else{let a=t.data.length;o+=` delete ${a} expense`,o+=a>1?"s?":"?"}return o}function n(){R.confirmDelete(),R.dismissModal()}return[l,n]}class qe extends H{constructor(e){super(),J(this,e,Ve,Re,K,{})}}function $e(r,e,s){const t=r.slice();return t[9]=e[s],t}function Fe(r){let e,s,t=r[9]+"",l,n,o;function a(){return r[8](r[9])}return{c(){e=$("button"),s=w("+ "),l=w(t),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var c=T(e);s=D(c,"+ "),l=D(c,t),c.forEach(p),this.h()},h(){v(e,"class","person svelte-19vpr12")},m(_,c){y(_,e,c),d(e,s),d(e,l),n||(o=P(e,"click",a),n=!0)},p(_,c){r=_,c&2&&t!==(t=r[9]+"")&&re(l,t)},d(_){_&&p(e),n=!1,o()}}}function Ye(r){let e,s,t=r[9]+"",l,n,o;function a(){return r[7](r[9])}return{c(){e=$("button"),s=w("✓ "),l=w(t),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var c=T(e);s=D(c,"✓ "),l=D(c,t),c.forEach(p),this.h()},h(){v(e,"class","person svelte-19vpr12")},m(_,c){y(_,e,c),d(e,s),d(e,l),n||(o=P(e,"click",a),n=!0)},p(_,c){r=_,c&2&&t!==(t=r[9]+"")&&re(l,t)},d(_){_&&p(e),n=!1,o()}}}function ke(r){let e,s;function t(o,a){return a&3&&(e=null),e==null&&(e=!!o[0].has(o[9])),e?Ye:Fe}let l=t(r,-1),n=l(r);return{c(){n.c(),s=j()},l(o){n.l(o),s=j()},m(o,a){n.m(o,a),y(o,s,a)},p(o,a){l===(l=t(o,a))&&n?n.p(o,a):(n.d(1),n=l(o),n&&(n.c(),n.m(s.parentNode,s)))},d(o){n.d(o),o&&p(s)}}}function ze(r){let e,s,t,l,n,o,a,_,c,u,f,m,i,b=r[1],h=[];for(let g=0;g<b.length;g+=1)h[g]=ke($e(r,b,g));return{c(){e=$("label"),s=w("Debtors:"),t=B(),l=$("div");for(let g=0;g<h.length;g+=1)h[g].c();n=B(),o=$("div"),a=$("button"),_=w("Select all"),c=B(),u=$("button"),f=w("Deselect all"),this.h()},l(g){e=k(g,"LABEL",{for:!0});var C=T(e);s=D(C,"Debtors:"),C.forEach(p),t=A(g),l=k(g,"DIV",{id:!0,class:!0});var E=T(l);for(let F=0;F<h.length;F+=1)h[F].l(E);n=A(E),o=k(E,"DIV",{id:!0,class:!0});var q=T(o);a=k(q,"BUTTON",{class:!0});var S=T(a);_=D(S,"Select all"),S.forEach(p),c=A(q),u=k(q,"BUTTON",{class:!0});var G=T(u);f=D(G,"Deselect all"),G.forEach(p),q.forEach(p),E.forEach(p),this.h()},h(){v(e,"for","debtors"),v(a,"class","ctrl svelte-19vpr12"),v(u,"class","ctrl svelte-19vpr12"),v(o,"id","controls"),v(o,"class","svelte-19vpr12"),v(l,"id","debtors"),v(l,"class","svelte-19vpr12")},m(g,C){y(g,e,C),d(e,s),y(g,t,C),y(g,l,C);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(l,null);d(l,n),d(l,o),d(o,a),d(a,_),d(o,c),d(o,u),d(u,f),m||(i=[P(a,"click",r[4]),P(u,"click",r[5])],m=!0)},p(g,[C]){if(C&15){b=g[1];let E;for(E=0;E<b.length;E+=1){const q=$e(g,b,E);h[E]?h[E].p(q,C):(h[E]=ke(q),h[E].c(),h[E].m(l,n))}for(;E<h.length;E+=1)h[E].d(1);h.length=b.length}},i:I,o:I,d(g){g&&p(e),g&&p(t),g&&p(l),Oe(h,g),m=!1,se(i)}}}function Qe(r,e,s){let t,l;le(r,R,m=>s(6,l=m));let{selected:n}=e;function o(m){n.add(m),s(0,n)}function a(m){n.delete(m),s(0,n)}function _(){s(0,n=new Set(l.people))}function c(){s(0,n=new Set)}const u=m=>a(m),f=m=>o(m);return r.$$set=m=>{"selected"in m&&s(0,n=m.selected)},r.$$.update=()=>{r.$$.dirty&64&&s(1,t=Array.from(l.people))},[n,t,o,a,_,c,l,u,f]}class We extends H{constructor(e){super(),J(this,e,Qe,ze,K,{selected:0})}}function Ne(r,e,s){const t=r.slice();return t[4]=e[s],t}function Te(r){let e,s=r[4]+"",t,l;return{c(){e=$("option"),t=w(s),this.h()},l(n){e=k(n,"OPTION",{});var o=T(e);t=D(o,s),o.forEach(p),this.h()},h(){e.__value=l=r[4],e.value=e.__value},m(n,o){y(n,e,o),d(e,t)},p(n,o){o&2&&s!==(s=n[4]+"")&&re(t,s),o&2&&l!==(l=n[4])&&(e.__value=l,e.value=e.__value)},d(n){n&&p(e)}}}function Xe(r){let e,s,t,l,n,o,a,_,c=r[1],u=[];for(let f=0;f<c.length;f+=1)u[f]=Te(Ne(r,c,f));return{c(){e=$("label"),s=w("Creditor:"),t=B(),l=$("select"),n=$("option"),o=w("Select a person");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=k(f,"LABEL",{for:!0});var m=T(e);s=D(m,"Creditor:"),m.forEach(p),t=A(f),l=k(f,"SELECT",{id:!0});var i=T(l);n=k(i,"OPTION",{});var b=T(n);o=D(b,"Select a person"),b.forEach(p);for(let h=0;h<u.length;h+=1)u[h].l(i);i.forEach(p),this.h()},h(){v(e,"for","creditor"),n.__value=null,n.value=n.__value,n.disabled=!0,v(l,"id","creditor"),r[0]===void 0&&Be(()=>r[3].call(l))},m(f,m){y(f,e,m),d(e,s),y(f,t,m),y(f,l,m),d(l,n),d(n,o);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(l,null);me(l,r[0],!0),a||(_=P(l,"change",r[3]),a=!0)},p(f,[m]){if(m&2){c=f[1];let i;for(i=0;i<c.length;i+=1){const b=Ne(f,c,i);u[i]?u[i].p(b,m):(u[i]=Te(b),u[i].c(),u[i].m(l,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=c.length}m&3&&me(l,f[0])},i:I,o:I,d(f){f&&p(e),f&&p(t),f&&p(l),Oe(u,f),a=!1,_()}}}function je(r,e,s){let t,l;le(r,R,a=>s(2,l=a));let{selected:n}=e;function o(){n=Ie(this),s(0,n),s(1,t),s(2,l)}return r.$$set=a=>{"selected"in a&&s(0,n=a.selected)},r.$$.update=()=>{r.$$.dirty&4&&s(1,t=Array.from(l.people))},[n,t,l,o]}class Ge extends H{constructor(e){super(),J(this,e,je,Xe,K,{selected:0})}}function ye(r){let e,s,t,l;return{c(){e=$("p"),s=w(r[0]),this.h()},l(n){e=k(n,"P",{class:!0});var o=T(e);s=D(o,r[0]),o.forEach(p),this.h()},h(){v(e,"class","svelte-4lo66r")},m(n,o){y(n,e,o),d(e,s),l=!0},p(n,o){(!l||o&1)&&re(s,n[0])},i(n){l||(Be(()=>{l&&(t||(t=he(e,Ee,{duration:320},!0)),t.run(1))}),l=!0)},o(n){t||(t=he(e,Ee,{duration:320},!1)),t.run(0),l=!1},d(n){n&&p(e),n&&t&&t.end()}}}function He(r){let e,s,t=r[0]&&ye(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,n){t&&t.m(l,n),y(l,e,n),s=!0},p(l,[n]){l[0]?t?(t.p(l,n),n&1&&U(t,1)):(t=ye(l),t.c(),U(t,1),t.m(e.parentNode,e)):t&&(ue(),L(t,1,1,()=>{t=null}),fe())},i(l){s||(U(t),s=!0)},o(l){L(t),s=!1},d(l){t&&t.d(l),l&&p(e)}}}function Je(r,e,s){let{error:t}=e;return r.$$set=l=>{"error"in l&&s(0,t=l.error)},[t]}class Ke extends H{constructor(e){super(),J(this,e,Je,He,K,{error:0})}}function we(r){let e,s,t,l;return{c(){e=$("button"),s=w("Delete"),this.h()},l(n){e=k(n,"BUTTON",{id:!0,class:!0});var o=T(e);s=D(o,"Delete"),o.forEach(p),this.h()},h(){v(e,"id","delete"),v(e,"class","svelte-dws4n0")},m(n,o){y(n,e,o),d(e,s),t||(l=P(e,"click",r[5]),t=!0)},p:I,d(n){n&&p(e),t=!1,l()}}}function Ze(r){let e,s,t,l,n,o,a,_,c,u,f,m,i,b,h,g,C,E,q,S,G,F,oe,ie,x,ne,ae,ce;function Se(O){r[7](O)}let de={};r[1].payer!==void 0&&(de.selected=r[1].payer),a=new Ge({props:de}),be.push(()=>ve(a,"selected",Se));function Pe(O){r[9](O)}let _e={};r[1].debtors!==void 0&&(_e.selected=r[1].debtors),h=new We({props:_e}),be.push(()=>ve(h,"selected",Pe)),E=new Ke({props:{error:r[2]}});let M=r[3].mode==V.EditExpense&&we(r);return{c(){e=$("form"),s=$("label"),t=w("Expense name:"),l=B(),n=$("input"),o=B(),z(a.$$.fragment),c=B(),u=$("label"),f=w("Amount:"),m=B(),i=$("input"),b=B(),z(h.$$.fragment),C=B(),z(E.$$.fragment),q=B(),S=$("div"),M&&M.c(),G=B(),F=$("button"),oe=w("Close"),ie=B(),x=$("input"),this.h()},l(O){e=k(O,"FORM",{});var N=T(e);s=k(N,"LABEL",{for:!0});var ee=T(s);t=D(ee,"Expense name:"),ee.forEach(p),l=A(N),n=k(N,"INPUT",{id:!0,type:!0}),o=A(N),Q(a.$$.fragment,N),c=A(N),u=k(N,"LABEL",{for:!0});var te=T(u);f=D(te,"Amount:"),te.forEach(p),m=A(N),i=k(N,"INPUT",{id:!0,type:!0}),b=A(N),Q(h.$$.fragment,N),C=A(N),Q(E.$$.fragment,N),q=A(N),S=k(N,"DIV",{id:!0,class:!0});var Y=T(S);M&&M.l(Y),G=A(Y),F=k(Y,"BUTTON",{class:!0});var pe=T(F);oe=D(pe,"Close"),pe.forEach(p),ie=A(Y),x=k(Y,"INPUT",{type:!0,class:!0}),Y.forEach(p),N.forEach(p),this.h()},h(){v(s,"for","name"),v(n,"id","name"),v(n,"type","text"),v(u,"for","amount"),v(i,"id","amount"),v(i,"type","number"),v(F,"class","svelte-dws4n0"),v(x,"type","submit"),v(x,"class","svelte-dws4n0"),v(S,"id","btns"),v(S,"class","svelte-dws4n0")},m(O,N){y(O,e,N),d(e,s),d(s,t),d(e,l),d(e,n),Z(n,r[1].name),d(e,o),W(a,e,null),d(e,c),d(e,u),d(u,f),d(e,m),d(e,i),Z(i,r[1].amount),d(e,b),W(h,e,null),d(e,C),W(E,e,null),d(e,q),d(e,S),M&&M.m(S,null),d(S,G),d(S,F),d(F,oe),d(S,ie),d(S,x),ne=!0,ae||(ce=[P(n,"input",r[6]),P(i,"input",r[8]),P(F,"click",function(){Ae(r[0])&&r[0].apply(this,arguments)}),P(e,"submit",Ce(r[4]))],ae=!0)},p(O,[N]){r=O,N&2&&n.value!==r[1].name&&Z(n,r[1].name);const ee={};!_&&N&2&&(_=!0,ee.selected=r[1].payer,ge(()=>_=!1)),a.$set(ee),N&2&&Me(i.value)!==r[1].amount&&Z(i,r[1].amount);const te={};!g&&N&2&&(g=!0,te.selected=r[1].debtors,ge(()=>g=!1)),h.$set(te);const Y={};N&4&&(Y.error=r[2]),E.$set(Y),r[3].mode==V.EditExpense?M?M.p(r,N):(M=we(r),M.c(),M.m(S,G)):M&&(M.d(1),M=null)},i(O){ne||(U(a.$$.fragment,O),U(h.$$.fragment,O),U(E.$$.fragment,O),ne=!0)},o(O){L(a.$$.fragment,O),L(h.$$.fragment,O),L(E.$$.fragment,O),ne=!1},d(O){O&&p(e),X(a),X(h),X(E),M&&M.d(),ae=!1,se(ce)}}}function xe(r,e,s){let t;le(r,R,i=>s(3,t=i));let{dismiss:l}=e,n=t.currentExpense,o="";function a(){s(2,o=R.submitExpense()??"")}function _(){t.deleteExpenses(n.name)}function c(){n.name=this.value,s(1,n)}function u(i){r.$$.not_equal(n.payer,i)&&(n.payer=i,s(1,n))}function f(){n.amount=Me(this.value),s(1,n)}function m(i){r.$$.not_equal(n.debtors,i)&&(n.debtors=i,s(1,n))}return r.$$set=i=>{"dismiss"in i&&s(0,l=i.dismiss)},[l,n,o,t,a,_,c,u,f,m]}class Ue extends H{constructor(e){super(),J(this,e,xe,Ze,K,{dismiss:0})}}function et(r){let e,s,t,l,n,o,a,_,c,u,f,m;return{c(){e=$("form"),s=$("label"),t=w("Event name:"),l=B(),n=$("input"),o=B(),a=$("input"),_=B(),c=$("button"),u=w("Close"),this.h()},l(i){e=k(i,"FORM",{});var b=T(e);s=k(b,"LABEL",{for:!0});var h=T(s);t=D(h,"Event name:"),h.forEach(p),l=A(b),n=k(b,"INPUT",{id:!0,type:!0,placeholder:!0,selected:!0}),o=A(b),a=k(b,"INPUT",{type:!0}),b.forEach(p),_=A(i),c=k(i,"BUTTON",{});var g=T(c);u=D(g,"Close"),g.forEach(p),this.h()},h(){v(s,"for","event-input"),v(n,"id","event-input"),v(n,"type","text"),v(n,"placeholder","New event"),v(n,"selected",""),v(a,"type","submit"),a.value="Create"},m(i,b){y(i,e,b),d(e,s),d(s,t),d(e,l),d(e,n),Z(n,r[1]),d(e,o),d(e,a),y(i,_,b),y(i,c,b),d(c,u),f||(m=[P(n,"input",r[3]),P(e,"submit",Ce(r[2])),P(c,"click",function(){Ae(r[0])&&r[0].apply(this,arguments)})],f=!0)},p(i,[b]){r=i,b&2&&n.value!==r[1]&&Z(n,r[1])},i:I,o:I,d(i){i&&p(e),i&&p(_),i&&p(c),f=!1,se(m)}}}function tt(r,e,s){let t="",{dismiss:l}=e;function n(){const a=t==""?"New event":t;R.createEvent(a)}function o(){t=this.value,s(1,t)}return r.$$set=a=>{"dismiss"in a&&s(0,l=a.dismiss)},[l,t,n,o]}class lt extends H{constructor(e){super(),J(this,e,tt,et,K,{dismiss:0})}}function De(r){let e,s;return e=new Le({props:{visible:r[1],$$slots:{default:[it]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p(t,l){const n={};l&2&&(n.visible=t[1]),l&17&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function nt(r){let e,s;return e=new lt({props:{dismiss:R.dismissModal}}),{c(){z(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p:I,i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function st(r){let e,s;return e=new Ue({props:{dismiss:R.dismissModal}}),{c(){z(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p:I,i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function rt(r){let e,s;return e=new qe({}),{c(){z(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p:I,i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function ot(r){let e,s;return e=new Ue({props:{dismiss:R.dismissModal}}),{c(){z(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,l){W(e,t,l),s=!0},p:I,i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function it(r){let e,s,t,l,n,o;const a=[ot,rt,st,nt],_=[];function c(u,f){return f&1&&(e=null),f&1&&(s=null),e==null&&(e=!!u[2].includes(u[0].mode)),e?0:(s==null&&(s=!!u[3].includes(u[0].mode)),s?1:u[0].mode==V.EditExpense?2:u[0].mode==V.CreateEvent?3:-1)}return~(t=c(r,-1))&&(l=_[t]=a[t](r)),{c(){l&&l.c(),n=j()},l(u){l&&l.l(u),n=j()},m(u,f){~t&&_[t].m(u,f),y(u,n,f),o=!0},p(u,f){let m=t;t=c(u,f),t===m?~t&&_[t].p(u,f):(l&&(ue(),L(_[m],1,1,()=>{_[m]=null}),fe()),~t?(l=_[t],l?l.p(u,f):(l=_[t]=a[t](u),l.c()),U(l,1),l.m(n.parentNode,n)):l=null)},i(u){o||(U(l),o=!0)},o(u){L(l),o=!1},d(u){~t&&_[t].d(u),u&&p(n)}}}function at(r){let e,s,t=r[0].mode!=V.None&&De(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,n){t&&t.m(l,n),y(l,e,n),s=!0},p(l,[n]){l[0].mode!=V.None?t?(t.p(l,n),n&1&&U(t,1)):(t=De(l),t.c(),U(t,1),t.m(e.parentNode,e)):t&&(ue(),L(t,1,1,()=>{t=null}),fe())},i(l){s||(U(t),s=!0)},o(l){L(t),s=!1},d(l){t&&t.d(l),l&&p(e)}}}function ut(r,e,s){let t,l;le(r,R,a=>s(0,l=a));const n=[V.CreateExpense,V.EditExpense],o=[V.RemovePerson,V.DeleteExpense];return r.$$.update=()=>{r.$$.dirty&1&&s(1,t=l.mode!==V.None)},[l,t,n,o]}class _t extends H{constructor(e){super(),J(this,e,ut,at,K,{})}}export{Ke as E,_t as M};
