import{S as J,i as K,s as Q,l as $,r as w,a as O,m as k,n as T,u as D,h as p,c as U,p as v,b as y,F as d,G as P,E as I,X as se,H as le,P as Be,e as j,v as re,T as Oe,a5 as me,a6 as Ie,f as C,g as ue,t as L,d as fe,U as he,Z as be,_ as ve,w as G,x as H,a0 as W,y as X,V as Ue,a7 as Me,$ as ge,a8 as Ae,B as Z}from"./index-2e9e6908.js";import{m as V,M as F}from"./stores-a14884fd.js";import{s as Ee,M as Le}from"./Modal-8f96ab8e.js";function Ve(r){let e,s=r[0]()+"",t,l,n,o,a,_,c,u,f,m;return{c(){e=$("span"),t=w(s),l=O(),n=$("div"),o=$("button"),a=w("No"),_=O(),c=$("button"),u=w("Yes"),this.h()},l(i){e=k(i,"SPAN",{class:!0});var b=T(e);t=D(b,s),b.forEach(p),l=U(i),n=k(i,"DIV",{class:!0});var h=T(n);o=k(h,"BUTTON",{class:!0});var g=T(o);a=D(g,"No"),g.forEach(p),_=U(h),c=k(h,"BUTTON",{id:!0,class:!0});var M=T(c);u=D(M,"Yes"),M.forEach(p),h.forEach(p),this.h()},h(){v(e,"class","svelte-144lea8"),v(o,"class","svelte-144lea8"),v(c,"id","confirm-btn"),v(c,"class","svelte-144lea8"),v(n,"class","svelte-144lea8")},m(i,b){y(i,e,b),d(e,t),y(i,l,b),y(i,n,b),d(n,o),d(o,a),d(n,_),d(n,c),d(c,u),f||(m=[P(o,"click",V.dismissModal),P(c,"click",r[1])],f=!0)},p:I,i:I,o:I,d(i){i&&p(e),i&&p(l),i&&p(n),f=!1,se(m)}}}function Fe(r,e,s){let t;le(r,V,o=>s(2,t=o));function l(){if(!t.data)return"";let o="Are you sure you want to";if(t.mode==F.RemovePerson)o+=` remove "${t.data}"?`;else{let a=t.data.length;o+=` delete ${a} expense`,o+=a>1?"s?":"?"}return o}function n(){V.confirmDelete(),V.dismissModal()}return[l,n]}class Re extends J{constructor(e){super(),K(this,e,Fe,Ve,Q,{})}}function $e(r,e,s){const t=r.slice();return t[9]=e[s],t}function qe(r){let e,s,t=r[9]+"",l,n,o;function a(){return r[8](r[9])}return{c(){e=$("button"),s=w("+ "),l=w(t),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var c=T(e);s=D(c,"+ "),l=D(c,t),c.forEach(p),this.h()},h(){v(e,"class","person svelte-19vpr12")},m(_,c){y(_,e,c),d(e,s),d(e,l),n||(o=P(e,"click",a),n=!0)},p(_,c){r=_,c&2&&t!==(t=r[9]+"")&&re(l,t)},d(_){_&&p(e),n=!1,o()}}}function Ye(r){let e,s,t=r[9]+"",l,n,o;function a(){return r[7](r[9])}return{c(){e=$("button"),s=w("\u2713 "),l=w(t),this.h()},l(_){e=k(_,"BUTTON",{class:!0});var c=T(e);s=D(c,"\u2713 "),l=D(c,t),c.forEach(p),this.h()},h(){v(e,"class","person svelte-19vpr12")},m(_,c){y(_,e,c),d(e,s),d(e,l),n||(o=P(e,"click",a),n=!0)},p(_,c){r=_,c&2&&t!==(t=r[9]+"")&&re(l,t)},d(_){_&&p(e),n=!1,o()}}}function ke(r){let e,s;function t(o,a){return a&3&&(e=null),e==null&&(e=!!o[0].has(o[9])),e?Ye:qe}let l=t(r,-1),n=l(r);return{c(){n.c(),s=j()},l(o){n.l(o),s=j()},m(o,a){n.m(o,a),y(o,s,a)},p(o,a){l===(l=t(o,a))&&n?n.p(o,a):(n.d(1),n=l(o),n&&(n.c(),n.m(s.parentNode,s)))},d(o){n.d(o),o&&p(s)}}}function Ge(r){let e,s,t,l,n,o,a,_,c,u,f,m,i,b=r[1],h=[];for(let g=0;g<b.length;g+=1)h[g]=ke($e(r,b,g));return{c(){e=$("label"),s=w("Debtors:"),t=O(),l=$("div");for(let g=0;g<h.length;g+=1)h[g].c();n=O(),o=$("div"),a=$("button"),_=w("Select all"),c=O(),u=$("button"),f=w("Deselect all"),this.h()},l(g){e=k(g,"LABEL",{for:!0});var M=T(e);s=D(M,"Debtors:"),M.forEach(p),t=U(g),l=k(g,"DIV",{id:!0,class:!0});var E=T(l);for(let q=0;q<h.length;q+=1)h[q].l(E);n=U(E),o=k(E,"DIV",{id:!0,class:!0});var R=T(o);a=k(R,"BUTTON",{class:!0});var S=T(a);_=D(S,"Select all"),S.forEach(p),c=U(R),u=k(R,"BUTTON",{class:!0});var z=T(u);f=D(z,"Deselect all"),z.forEach(p),R.forEach(p),E.forEach(p),this.h()},h(){v(e,"for","debtors"),v(a,"class","ctrl svelte-19vpr12"),v(u,"class","ctrl svelte-19vpr12"),v(o,"id","controls"),v(o,"class","svelte-19vpr12"),v(l,"id","debtors"),v(l,"class","svelte-19vpr12")},m(g,M){y(g,e,M),d(e,s),y(g,t,M),y(g,l,M);for(let E=0;E<h.length;E+=1)h[E].m(l,null);d(l,n),d(l,o),d(o,a),d(a,_),d(o,c),d(o,u),d(u,f),m||(i=[P(a,"click",r[4]),P(u,"click",r[5])],m=!0)},p(g,[M]){if(M&15){b=g[1];let E;for(E=0;E<b.length;E+=1){const R=$e(g,b,E);h[E]?h[E].p(R,M):(h[E]=ke(R),h[E].c(),h[E].m(l,n))}for(;E<h.length;E+=1)h[E].d(1);h.length=b.length}},i:I,o:I,d(g){g&&p(e),g&&p(t),g&&p(l),Be(h,g),m=!1,se(i)}}}function He(r,e,s){let t,l;le(r,V,m=>s(6,l=m));let{selected:n}=e;function o(m){n.add(m),s(0,n)}function a(m){n.delete(m),s(0,n)}function _(){s(0,n=new Set(l.people))}function c(){s(0,n=new Set)}const u=m=>a(m),f=m=>o(m);return r.$$set=m=>{"selected"in m&&s(0,n=m.selected)},r.$$.update=()=>{r.$$.dirty&64&&s(1,t=Array.from(l.people))},[n,t,o,a,_,c,l,u,f]}class Xe extends J{constructor(e){super(),K(this,e,He,Ge,Q,{selected:0})}}function Ne(r,e,s){const t=r.slice();return t[4]=e[s],t}function Te(r){let e,s=r[4]+"",t,l;return{c(){e=$("option"),t=w(s),this.h()},l(n){e=k(n,"OPTION",{});var o=T(e);t=D(o,s),o.forEach(p),this.h()},h(){e.__value=l=r[4],e.value=e.__value},m(n,o){y(n,e,o),d(e,t)},p(n,o){o&2&&s!==(s=n[4]+"")&&re(t,s),o&2&&l!==(l=n[4])&&(e.__value=l,e.value=e.__value)},d(n){n&&p(e)}}}function Ze(r){let e,s,t,l,n,o,a,_,c=r[1],u=[];for(let f=0;f<c.length;f+=1)u[f]=Te(Ne(r,c,f));return{c(){e=$("label"),s=w("Creditor:"),t=O(),l=$("select"),n=$("option"),o=w("Select a person");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=k(f,"LABEL",{for:!0});var m=T(e);s=D(m,"Creditor:"),m.forEach(p),t=U(f),l=k(f,"SELECT",{id:!0});var i=T(l);n=k(i,"OPTION",{});var b=T(n);o=D(b,"Select a person"),b.forEach(p);for(let h=0;h<u.length;h+=1)u[h].l(i);i.forEach(p),this.h()},h(){v(e,"for","creditor"),n.__value=null,n.value=n.__value,n.disabled=!0,v(l,"id","creditor"),r[0]===void 0&&Oe(()=>r[3].call(l))},m(f,m){y(f,e,m),d(e,s),y(f,t,m),y(f,l,m),d(l,n),d(n,o);for(let i=0;i<u.length;i+=1)u[i].m(l,null);me(l,r[0]),a||(_=P(l,"change",r[3]),a=!0)},p(f,[m]){if(m&2){c=f[1];let i;for(i=0;i<c.length;i+=1){const b=Ne(f,c,i);u[i]?u[i].p(b,m):(u[i]=Te(b),u[i].c(),u[i].m(l,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=c.length}m&3&&me(l,f[0])},i:I,o:I,d(f){f&&p(e),f&&p(t),f&&p(l),Be(u,f),a=!1,_()}}}function je(r,e,s){let t,l;le(r,V,a=>s(2,l=a));let{selected:n}=e;function o(){n=Ie(this),s(0,n),s(1,t),s(2,l)}return r.$$set=a=>{"selected"in a&&s(0,n=a.selected)},r.$$.update=()=>{r.$$.dirty&4&&s(1,t=Array.from(l.people))},[n,t,l,o]}class ze extends J{constructor(e){super(),K(this,e,je,Ze,Q,{selected:0})}}function ye(r){let e,s,t,l;return{c(){e=$("p"),s=w(r[0]),this.h()},l(n){e=k(n,"P",{class:!0});var o=T(e);s=D(o,r[0]),o.forEach(p),this.h()},h(){v(e,"class","svelte-4lo66r")},m(n,o){y(n,e,o),d(e,s),l=!0},p(n,o){(!l||o&1)&&re(s,n[0])},i(n){l||(Oe(()=>{t||(t=he(e,Ee,{duration:320},!0)),t.run(1)}),l=!0)},o(n){t||(t=he(e,Ee,{duration:320},!1)),t.run(0),l=!1},d(n){n&&p(e),n&&t&&t.end()}}}function Je(r){let e,s,t=r[0]&&ye(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,n){t&&t.m(l,n),y(l,e,n),s=!0},p(l,[n]){l[0]?t?(t.p(l,n),n&1&&C(t,1)):(t=ye(l),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(ue(),L(t,1,1,()=>{t=null}),fe())},i(l){s||(C(t),s=!0)},o(l){L(t),s=!1},d(l){t&&t.d(l),l&&p(e)}}}function Ke(r,e,s){let{error:t}=e;return r.$$set=l=>{"error"in l&&s(0,t=l.error)},[t]}class Qe extends J{constructor(e){super(),K(this,e,Ke,Je,Q,{error:0})}}function we(r){let e,s,t,l;return{c(){e=$("button"),s=w("Delete"),this.h()},l(n){e=k(n,"BUTTON",{id:!0,class:!0});var o=T(e);s=D(o,"Delete"),o.forEach(p),this.h()},h(){v(e,"id","delete"),v(e,"class","svelte-dws4n0")},m(n,o){y(n,e,o),d(e,s),t||(l=P(e,"click",r[5]),t=!0)},p:I,d(n){n&&p(e),t=!1,l()}}}function We(r){let e,s,t,l,n,o,a,_,c,u,f,m,i,b,h,g,M,E,R,S,z,q,oe,ie,x,ne,ae,ce;function Se(B){r[7](B)}let de={};r[1].payer!==void 0&&(de.selected=r[1].payer),a=new ze({props:de}),be.push(()=>ve(a,"selected",Se));function Pe(B){r[9](B)}let _e={};r[1].debtors!==void 0&&(_e.selected=r[1].debtors),h=new Xe({props:_e}),be.push(()=>ve(h,"selected",Pe)),E=new Qe({props:{error:r[2]}});let A=r[3].mode==F.EditExpense&&we(r);return{c(){e=$("form"),s=$("label"),t=w("Expense name:"),l=O(),n=$("input"),o=O(),G(a.$$.fragment),c=O(),u=$("label"),f=w("Amount:"),m=O(),i=$("input"),b=O(),G(h.$$.fragment),M=O(),G(E.$$.fragment),R=O(),S=$("div"),A&&A.c(),z=O(),q=$("button"),oe=w("Close"),ie=O(),x=$("input"),this.h()},l(B){e=k(B,"FORM",{});var N=T(e);s=k(N,"LABEL",{for:!0});var ee=T(s);t=D(ee,"Expense name:"),ee.forEach(p),l=U(N),n=k(N,"INPUT",{id:!0,type:!0}),o=U(N),H(a.$$.fragment,N),c=U(N),u=k(N,"LABEL",{for:!0});var te=T(u);f=D(te,"Amount:"),te.forEach(p),m=U(N),i=k(N,"INPUT",{id:!0,type:!0}),b=U(N),H(h.$$.fragment,N),M=U(N),H(E.$$.fragment,N),R=U(N),S=k(N,"DIV",{id:!0,class:!0});var Y=T(S);A&&A.l(Y),z=U(Y),q=k(Y,"BUTTON",{class:!0});var pe=T(q);oe=D(pe,"Close"),pe.forEach(p),ie=U(Y),x=k(Y,"INPUT",{type:!0,class:!0}),Y.forEach(p),N.forEach(p),this.h()},h(){v(s,"for","name"),v(n,"id","name"),v(n,"type","text"),v(u,"for","amount"),v(i,"id","amount"),v(i,"type","number"),v(q,"class","svelte-dws4n0"),v(x,"type","submit"),v(x,"class","svelte-dws4n0"),v(S,"id","btns"),v(S,"class","svelte-dws4n0")},m(B,N){y(B,e,N),d(e,s),d(s,t),d(e,l),d(e,n),W(n,r[1].name),d(e,o),X(a,e,null),d(e,c),d(e,u),d(u,f),d(e,m),d(e,i),W(i,r[1].amount),d(e,b),X(h,e,null),d(e,M),X(E,e,null),d(e,R),d(e,S),A&&A.m(S,null),d(S,z),d(S,q),d(q,oe),d(S,ie),d(S,x),ne=!0,ae||(ce=[P(n,"input",r[6]),P(i,"input",r[8]),P(q,"click",function(){Ue(r[0])&&r[0].apply(this,arguments)}),P(e,"submit",Me(r[4]))],ae=!0)},p(B,[N]){r=B,N&2&&n.value!==r[1].name&&W(n,r[1].name);const ee={};!_&&N&2&&(_=!0,ee.selected=r[1].payer,ge(()=>_=!1)),a.$set(ee),N&2&&Ae(i.value)!==r[1].amount&&W(i,r[1].amount);const te={};!g&&N&2&&(g=!0,te.selected=r[1].debtors,ge(()=>g=!1)),h.$set(te);const Y={};N&4&&(Y.error=r[2]),E.$set(Y),r[3].mode==F.EditExpense?A?A.p(r,N):(A=we(r),A.c(),A.m(S,z)):A&&(A.d(1),A=null)},i(B){ne||(C(a.$$.fragment,B),C(h.$$.fragment,B),C(E.$$.fragment,B),ne=!0)},o(B){L(a.$$.fragment,B),L(h.$$.fragment,B),L(E.$$.fragment,B),ne=!1},d(B){B&&p(e),Z(a),Z(h),Z(E),A&&A.d(),ae=!1,se(ce)}}}function xe(r,e,s){let t;le(r,V,i=>s(3,t=i));let{dismiss:l}=e,n=t.currentExpense,o="";function a(){var i;s(2,o=(i=V.submitExpense())!=null?i:"")}function _(){t.deleteExpenses(n.name)}function c(){n.name=this.value,s(1,n)}function u(i){r.$$.not_equal(n.payer,i)&&(n.payer=i,s(1,n))}function f(){n.amount=Ae(this.value),s(1,n)}function m(i){r.$$.not_equal(n.debtors,i)&&(n.debtors=i,s(1,n))}return r.$$set=i=>{"dismiss"in i&&s(0,l=i.dismiss)},[l,n,o,t,a,_,c,u,f,m]}class Ce extends J{constructor(e){super(),K(this,e,xe,We,Q,{dismiss:0})}}function et(r){let e,s,t,l,n,o,a,_,c,u,f,m;return{c(){e=$("form"),s=$("label"),t=w("Event name:"),l=O(),n=$("input"),o=O(),a=$("input"),_=O(),c=$("button"),u=w("Close"),this.h()},l(i){e=k(i,"FORM",{});var b=T(e);s=k(b,"LABEL",{for:!0});var h=T(s);t=D(h,"Event name:"),h.forEach(p),l=U(b),n=k(b,"INPUT",{id:!0,type:!0,placeholder:!0,selected:!0}),o=U(b),a=k(b,"INPUT",{type:!0}),b.forEach(p),_=U(i),c=k(i,"BUTTON",{});var g=T(c);u=D(g,"Close"),g.forEach(p),this.h()},h(){v(s,"for","event-input"),v(n,"id","event-input"),v(n,"type","text"),v(n,"placeholder","New event"),v(n,"selected",""),v(a,"type","submit"),a.value="Create"},m(i,b){y(i,e,b),d(e,s),d(s,t),d(e,l),d(e,n),W(n,r[1]),d(e,o),d(e,a),y(i,_,b),y(i,c,b),d(c,u),f||(m=[P(n,"input",r[3]),P(e,"submit",Me(r[2])),P(c,"click",function(){Ue(r[0])&&r[0].apply(this,arguments)})],f=!0)},p(i,[b]){r=i,b&2&&n.value!==r[1]&&W(n,r[1])},i:I,o:I,d(i){i&&p(e),i&&p(_),i&&p(c),f=!1,se(m)}}}function tt(r,e,s){let t="",{dismiss:l}=e;function n(){const a=t==""?"New event":t;V.createEvent(a)}function o(){t=this.value,s(1,t)}return r.$$set=a=>{"dismiss"in a&&s(0,l=a.dismiss)},[l,t,n,o]}class lt extends J{constructor(e){super(),K(this,e,tt,et,Q,{dismiss:0})}}function De(r){let e,s;return e=new Le({props:{visible:r[1],$$slots:{default:[it]},$$scope:{ctx:r}}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p(t,l){const n={};l&2&&(n.visible=t[1]),l&17&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function nt(r){let e,s;return e=new lt({props:{dismiss:V.dismissModal}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p:I,i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function st(r){let e,s;return e=new Ce({props:{dismiss:V.dismissModal}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p:I,i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function rt(r){let e,s;return e=new Re({}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p:I,i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function ot(r){let e,s;return e=new Ce({props:{dismiss:V.dismissModal}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){X(e,t,l),s=!0},p:I,i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){L(e.$$.fragment,t),s=!1},d(t){Z(e,t)}}}function it(r){let e,s,t,l,n,o;const a=[ot,rt,st,nt],_=[];function c(u,f){return f&1&&(e=null),f&1&&(s=null),e==null&&(e=!!u[2].includes(u[0].mode)),e?0:(s==null&&(s=!!u[3].includes(u[0].mode)),s?1:u[0].mode==F.EditExpense?2:u[0].mode==F.CreateEvent?3:-1)}return~(t=c(r,-1))&&(l=_[t]=a[t](r)),{c(){l&&l.c(),n=j()},l(u){l&&l.l(u),n=j()},m(u,f){~t&&_[t].m(u,f),y(u,n,f),o=!0},p(u,f){let m=t;t=c(u,f),t===m?~t&&_[t].p(u,f):(l&&(ue(),L(_[m],1,1,()=>{_[m]=null}),fe()),~t?(l=_[t],l?l.p(u,f):(l=_[t]=a[t](u),l.c()),C(l,1),l.m(n.parentNode,n)):l=null)},i(u){o||(C(l),o=!0)},o(u){L(l),o=!1},d(u){~t&&_[t].d(u),u&&p(n)}}}function at(r){let e,s,t=r[0].mode!=F.None&&De(r);return{c(){t&&t.c(),e=j()},l(l){t&&t.l(l),e=j()},m(l,n){t&&t.m(l,n),y(l,e,n),s=!0},p(l,[n]){l[0].mode!=F.None?t?(t.p(l,n),n&1&&C(t,1)):(t=De(l),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(ue(),L(t,1,1,()=>{t=null}),fe())},i(l){s||(C(t),s=!0)},o(l){L(t),s=!1},d(l){t&&t.d(l),l&&p(e)}}}function ut(r,e,s){let t,l;le(r,V,a=>s(0,l=a));const n=[F.CreateExpense,F.EditExpense],o=[F.RemovePerson,F.DeleteExpense];return r.$$.update=()=>{r.$$.dirty&1&&s(1,t=l.mode!==F.None)},[l,t,n,o]}class _t extends J{constructor(e){super(),K(this,e,ut,at,Q,{})}}export{Qe as E,_t as M};
