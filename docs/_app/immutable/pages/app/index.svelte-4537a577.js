import{S as V,i as F,s as G,l as b,r as y,a as O,m as $,n as k,u as T,h as p,c as L,p as S,b as D,F as d,G as A,v as x,E as q,H as Z,e as U,T as ee,a5 as X,f as I,g as te,d as ne,t as j,P as z,X as le,o as se,w as M,x as P,y as R,B as H,a6 as ae,J as re}from"../../chunks/index-2e9e6908.js";import{m as J,c as oe,E as B}from"../../chunks/stores-a14884fd.js";import{M as ce}from"../../chunks/ModalController-c4437854.js";import"../../chunks/singletons-001d274c.js";import"../../chunks/Modal-8f96ab8e.js";function ie(r){let e,n,l=r[0].name+"",a,i,h,f,m,v,o,g,c,E,u;return{c(){e=b("div"),n=b("spacn"),a=y(l),i=O(),h=b("br"),f=y(`
	Created at `),m=y(r[1]),v=O(),o=b("br"),g=y(`
	Last opened at `),c=y(r[2]),this.h()},l(C){e=$(C,"DIV",{class:!0});var t=k(e);n=$(t,"SPACN",{class:!0});var _=k(n);a=T(_,l),_.forEach(p),i=L(t),h=$(t,"BR",{}),f=T(t,`
	Created at `),m=T(t,r[1]),v=L(t),o=$(t,"BR",{}),g=T(t,`
	Last opened at `),c=T(t,r[2]),t.forEach(p),this.h()},h(){S(n,"class","event-name svelte-phm7vf"),S(e,"class","event svelte-phm7vf")},m(C,t){D(C,e,t),d(e,n),d(n,a),d(e,i),d(e,h),d(e,f),d(e,m),d(e,v),d(e,o),d(e,g),d(e,c),E||(u=A(e,"click",r[3]),E=!0)},p(C,[t]){t&1&&l!==(l=C[0].name+"")&&x(a,l)},i:q,o:q,d(C){C&&p(e),E=!1,u()}}}function fe(r,e,n){let l;Z(r,J,m=>n(4,l=m));let{event:a}=e,i=new Date(a.createdTime).toLocaleString(),h=new Date(a.openedTime).toLocaleString();function f(){console.log(a.createdTime),oe.setCurrentEvent(a.createdTime),l.goToRoute("/app/event")}return r.$$set=m=>{"event"in m&&n(0,a=m.event)},[a,i,h,f]}class ue extends V{constructor(e){super(),F(this,e,fe,ie,G,{event:0})}}function K(r,e,n){const l=r.slice();return l[6]=e[n],l}function Q(r,e,n){const l=r.slice();return l[9]=e[n],l}function W(r){let e,n,l=r[9]+"",a,i;return{c(){e=b("option"),n=y("\u2193 "),a=y(l),i=O(),this.h()},l(h){e=$(h,"OPTION",{});var f=k(e);n=T(f,"\u2193 "),a=T(f,l),i=L(f),f.forEach(p),this.h()},h(){e.__value=r[9],e.value=e.__value},m(h,f){D(h,e,f),d(e,n),d(e,a),d(e,i)},p:q,d(h){h&&p(e)}}}function Y(r){let e,n;return e=new ue({props:{event:r[6]}}),{c(){M(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,a){R(e,l,a),n=!0},p(l,a){const i={};a&2&&(i.event=l[6]),e.$set(i)},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function _e(r){let e,n,l,a,i,h,f,m,v,o,g=r[2],c=[];for(let t=0;t<g.length;t+=1)c[t]=W(Q(r,g,t));let E=r[1],u=[];for(let t=0;t<E.length;t+=1)u[t]=Y(K(r,E,t));const C=t=>j(u[t],1,1,()=>{u[t]=null});return{c(){e=b("div"),n=b("select");for(let t=0;t<c.length;t+=1)c[t].c();l=O(),a=b("button"),i=y("Create new event"),h=O();for(let t=0;t<u.length;t+=1)u[t].c();f=U(),this.h()},l(t){e=$(t,"DIV",{class:!0});var _=k(e);n=$(_,"SELECT",{id:!0,class:!0});var s=k(n);for(let N=0;N<c.length;N+=1)c[N].l(s);s.forEach(p),l=L(_),a=$(_,"BUTTON",{class:!0});var w=k(a);i=T(w,"Create new event"),w.forEach(p),_.forEach(p),h=L(t);for(let N=0;N<u.length;N+=1)u[N].l(t);f=U(),this.h()},h(){S(n,"id","sort-by"),S(n,"class","svelte-1ij57ls"),r[0]===void 0&&ee(()=>r[3].call(n)),S(a,"class","svelte-1ij57ls"),S(e,"class","wrapper svelte-1ij57ls")},m(t,_){D(t,e,_),d(e,n);for(let s=0;s<c.length;s+=1)c[s].m(n,null);X(n,r[0]),d(e,l),d(e,a),d(a,i),D(t,h,_);for(let s=0;s<u.length;s+=1)u[s].m(t,_);D(t,f,_),m=!0,v||(o=[A(n,"change",r[3]),A(a,"click",J.eventDialog)],v=!0)},p(t,[_]){if(_&4){g=t[2];let s;for(s=0;s<g.length;s+=1){const w=Q(t,g,s);c[s]?c[s].p(w,_):(c[s]=W(w),c[s].c(),c[s].m(n,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=g.length}if(_&5&&X(n,t[0]),_&2){E=t[1];let s;for(s=0;s<E.length;s+=1){const w=K(t,E,s);u[s]?(u[s].p(w,_),I(u[s],1)):(u[s]=Y(w),u[s].c(),I(u[s],1),u[s].m(f.parentNode,f))}for(te(),s=E.length;s<u.length;s+=1)C(s);ne()}},i(t){if(!m){for(let _=0;_<E.length;_+=1)I(u[_]);m=!0}},o(t){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)j(u[_]);m=!1},d(t){t&&p(e),z(c,t),t&&p(h),z(u,t),t&&p(f),v=!1,le(o)}}}function he(r,e,n){let l;Z(r,J,v=>n(4,l=v));let{sortOrder:a=B.Created}=e;const i=[B.Created,B.Name,B.Opened];let h=[];function f(v){l.getEvents(v).then(o=>{!o||(v===B.Name?n(1,h=o):n(1,h=o.reverse()))}).catch(o=>console.log("[Database] Error:",o))}se(()=>f(a));function m(){a=ae(this),n(0,a),n(2,i)}return r.$$set=v=>{"sortOrder"in v&&n(0,a=v.sortOrder)},r.$$.update=()=>{r.$$.dirty&1&&f(a)},[a,h,i,m]}class me extends V{constructor(e){super(),F(this,e,he,_e,G,{sortOrder:0})}}function de(r){let e,n,l,a,i,h,f,m,v;return l=new ce({}),m=new me({}),{c(){e=O(),n=b("section"),M(l.$$.fragment),a=O(),i=b("h1"),h=y("Events:"),f=O(),M(m.$$.fragment),this.h()},l(o){re('[data-svelte="svelte-11dqd79"]',document.head).forEach(p),e=L(o),n=$(o,"SECTION",{});var c=k(n);P(l.$$.fragment,c),a=L(c),i=$(c,"H1",{class:!0});var E=k(i);h=T(E,"Events:"),E.forEach(p),f=L(c),P(m.$$.fragment,c),c.forEach(p),this.h()},h(){document.title="App",S(i,"class","svelte-9hd0wo")},m(o,g){D(o,e,g),D(o,n,g),R(l,n,null),d(n,a),d(n,i),d(i,h),d(n,f),R(m,n,null),v=!0},p:q,i(o){v||(I(l.$$.fragment,o),I(m.$$.fragment,o),v=!0)},o(o){j(l.$$.fragment,o),j(m.$$.fragment,o),v=!1},d(o){o&&p(e),o&&p(n),H(l),H(m)}}}class $e extends V{constructor(e){super(),F(this,e,null,de,G,{})}}export{$e as default};
